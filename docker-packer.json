{
    "builders": [{
        "type": "docker",
        "image": "debian:9",
        "commit": true,
        "changes": [
            "WORKDIR {{`app_location`}}/{{`waiwera`}}"
        ]
      }
    ],
    "provisioners": [
      {
        "type": "shell",
        "inline": [
          "apt-get -y update && apt-get install -y  locales "
        ]
      },
      {
        "type": "shell",
        "inline": [
          "sed -i 's/^# *\\(en_US.UTF-8\\)/\\1/' /etc/locale.gen && locale-gen"
        ],
        "environment_vars": [
            "LANG=en_US.UTF-8",
            "LC_ALL=en_US.UTF-8",
            "LC_TYPE=en_US.UTF-8"
           ]
      },
      {
        "type": "ansible",
        "user": "root",
        "playbook_file": "ansible/packer.yml",
        "extra_arguments": [ "-v" ,
                              "-e 'waiwera_user={{ w_user }}" ,
                              "-e 'waiwera_pwd={{ w_pwd }}" ,
                             "--skip-tags=vagrant"
        ],
      
    "post-processors": [[ {
        "type": "docker-tag",
        "repository": "thar102/waiwera",
        "tag": "packer"
    } ]]
}
